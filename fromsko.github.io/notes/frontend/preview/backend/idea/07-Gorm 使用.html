<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>07-Gorm ä½¿ç”¨ | fromsko çŸ¥è¯†åº“</title>
    <meta name="description" content="fromsko çš„ä¸ªäººçŸ¥è¯†åº“ï¼Œè®°å½•å­¦ä¹ ã€å®è·µä¸æ€è€ƒ">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.DLnmjz7M.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.D1DBIxqe.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BNBpVfmM.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CYxz2ou1.js">
    <link rel="modulepreload" href="/assets/notes_frontend_preview_backend_idea_07-Gorm ä½¿ç”¨.md.DfDxfYgI.lean.js">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <link rel="mask-icon" href="/favicon.ico" color="#3eaf7c">
    <meta name="msapplication-TileImage" content="/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a20dac><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6803f9ce></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-6803f9ce>Skip to content</a><!--]--><!----><header class="VPNav" data-v-c6a20dac data-v-1eb269e7><div class="VPNavBar" data-v-1eb269e7 data-v-3e5de30a><div class="wrapper" data-v-3e5de30a><div class="container" data-v-3e5de30a><div class="title" data-v-3e5de30a><div class="VPNavBarTitle has-sidebar" data-v-3e5de30a data-v-6fc974a2><a class="title" href="/" data-v-6fc974a2><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-f29c4066><!--]--><span data-v-6fc974a2>fromsko çŸ¥è¯†åº“</span><!--[--><!--[--><!--[--><!--[--><img class="visitor" src="https://visitor-badge.laobi.icu/badge?page_id=maomao1996.vitepress-nav-template" onerror="this.style.display=&#39;none&#39;" data-v-124f1dab><!--]--><!--]--><!--]--><!--]--></a></div></div><div class="content" data-v-3e5de30a><div class="content-body" data-v-3e5de30a><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3e5de30a><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3e5de30a data-v-d94de6e3><span id="main-nav-aria-label" class="visually-hidden" data-v-d94de6e3> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nav/" tabindex="0" data-v-d94de6e3 data-v-71157229><!--[--><span data-v-71157229>å‰ç«¯å¯¼èˆª</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3e5de30a data-v-e9d1dd7b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e9d1dd7b data-v-df922bde data-v-ff433ec8><span class="check" data-v-ff433ec8><span class="icon" data-v-ff433ec8><!--[--><span class="vpi-sun sun" data-v-df922bde></span><span class="vpi-moon moon" data-v-df922bde></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3e5de30a data-v-ca5101d5 data-v-7d103c93><!--[--><a class="VPSocialLink no-icon" href="https://github.com/fromsko" aria-label="github" target="_blank" rel="noopener" data-v-7d103c93 data-v-5c653e15><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3e5de30a data-v-1b0f0381 data-v-0b1c30e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-0b1c30e2><span class="vpi-more-horizontal icon" data-v-0b1c30e2></span></button><div class="menu" data-v-0b1c30e2><div class="VPMenu" data-v-0b1c30e2 data-v-d960eac0><!----><!--[--><!--[--><!----><div class="group" data-v-1b0f0381><div class="item appearance" data-v-1b0f0381><p class="label" data-v-1b0f0381>ä¸»é¢˜</p><div class="appearance-action" data-v-1b0f0381><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-1b0f0381 data-v-df922bde data-v-ff433ec8><span class="check" data-v-ff433ec8><span class="icon" data-v-ff433ec8><!--[--><span class="vpi-sun sun" data-v-df922bde></span><span class="vpi-moon moon" data-v-df922bde></span><!--]--></span></span></button></div></div></div><div class="group" data-v-1b0f0381><div class="item social-links" data-v-1b0f0381><div class="VPSocialLinks social-links-list" data-v-1b0f0381 data-v-7d103c93><!--[--><a class="VPSocialLink no-icon" href="https://github.com/fromsko" aria-label="github" target="_blank" rel="noopener" data-v-7d103c93 data-v-5c653e15><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3e5de30a data-v-374e96f7><span class="container" data-v-374e96f7><span class="top" data-v-374e96f7></span><span class="middle" data-v-374e96f7></span><span class="bottom" data-v-374e96f7></span></span></button></div></div></div></div><div class="divider" data-v-3e5de30a><div class="divider-line" data-v-3e5de30a></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-c6a20dac data-v-04f7aecb><div class="container" data-v-04f7aecb><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-04f7aecb><span class="vpi-align-left menu-icon" data-v-04f7aecb></span><span class="menu-text" data-v-04f7aecb>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-04f7aecb data-v-153bbf02><button data-v-153bbf02>å›åˆ°é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-c6a20dac data-v-a7d49916><div class="curtain" data-v-a7d49916></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a7d49916><span class="visually-hidden" id="sidebar-aria-label" data-v-a7d49916> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-96bfdc08><section class="VPSidebarItem level-0" data-v-96bfdc08 data-v-d0c9dde2><!----><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/tasks/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>ğŸš€ ä»»åŠ¡æ¸…å•</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-96bfdc08><section class="VPSidebarItem level-0 collapsible is-link" data-v-96bfdc08 data-v-d0c9dde2><div class="item" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/" data-v-d0c9dde2><!--[--><h2 class="text" data-v-d0c9dde2>ğŸ“ æŠ€æœ¯ç¬”è®°</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><section class="VPSidebarItem level-1 collapsible collapsed is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/" data-v-d0c9dde2><!--[--><h3 class="text" data-v-d0c9dde2>å‰ç«¯å¼€å‘</h3><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>æ ¸å¿ƒç¬”è®°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/daisyUI%E8%AE%BE%E8%AE%A1" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>daisyUI è®¾è®¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/%E9%9D%A2%E8%AF%95%E5%BF%83%E5%BE%97%E6%8C%87%E5%8D%97" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>é¢è¯•å¿ƒå¾—æŒ‡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/%E5%BF%83%E6%80%81%E5%B0%8F%E6%8A%80%E5%B7%A7" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>å¿ƒæ€å°æŠ€å·§</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" role="button" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><h4 class="text" data-v-d0c9dde2>AI ç›¸å…³</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/AI%20%E7%9F%A5%E8%AF%86%E9%97%AE%E7%AD%94" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>AI çŸ¥è¯†é—®ç­”</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/ai/03-n8n%20%E4%BD%BF%E7%94%A8" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>n8n ä½¿ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/ai/07-PromptAgent" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>PromptAgent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/ai/AI-agent-notebook" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>AI Agent å¼€å‘</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" role="button" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><h4 class="text" data-v-d0c9dde2>Vue ç”Ÿæ€</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/Vue%20%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98%E6%B1%87%E9%9B%86" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Vue å¼€å‘é—®é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/vue-router" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>vue-router</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" role="button" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><h4 class="text" data-v-d0c9dde2>å¼€å‘å·¥å…·</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/Vscode%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>VSCode æ’ä»¶å¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/tailwindcss" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Tailwind CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/frontend/preview/css%20%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>CSS å­¦ä¹ æŒ‡å—</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/" data-v-d0c9dde2><!--[--><h3 class="text" data-v-d0c9dde2>åç«¯å¼€å‘</h3><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>åç«¯ç¬”è®°æ€»è§ˆ</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" role="button" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><h4 class="text" data-v-d0c9dde2>Android å¼€å‘</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/harmony/Base" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>HarmonyOS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/kotlin/Kotlin%20%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Kotlin è¯­æ³•</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-3 collapsible collapsed" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" role="button" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><h5 class="text" data-v-d0c9dde2>Lua (Android)</h5><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/androlua" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Androlua</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/%E5%9F%BA%E7%A1%80" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Lua åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/%E5%AE%9E%E7%94%A8" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Lua å®ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/Fa%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Fa å®ä¾‹ä»£ç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/Fa%E5%B8%83%E5%B1%80%E4%BB%A3%E7%A0%81" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Fa å¸ƒå±€ä»£ç </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/android/lua/Fa%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Fa çˆ¬è™«æ•™ç¨‹</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/container/Docker%20%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Docker å®¹å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/backend/database/Oracle-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>Oracle æ•°æ®åº“</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/notes/tools/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>å·¥å…·ä½¿ç”¨</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-96bfdc08><section class="VPSidebarItem level-0 collapsible is-link" data-v-96bfdc08 data-v-d0c9dde2><div class="item" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/learning/" data-v-d0c9dde2><!--[--><h2 class="text" data-v-d0c9dde2>ğŸ“š å­¦ä¹ è®°å½•</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/learning/books/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>è¯»ä¹¦ç¬”è®°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/learning/courses/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>è¯¾ç¨‹å­¦ä¹ </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-96bfdc08><section class="VPSidebarItem level-0" data-v-96bfdc08 data-v-d0c9dde2><!----><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/ai/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>ğŸ¤– AIå·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/projects/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>ğŸ’¡ é¡¹ç›®å®è·µ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-96bfdc08><section class="VPSidebarItem level-0 collapsible is-link" data-v-96bfdc08 data-v-d0c9dde2><div class="item" tabindex="0" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/about/" data-v-d0c9dde2><!--[--><h2 class="text" data-v-d0c9dde2>ğŸ‘¤ å…³äºæˆ‘</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d0c9dde2><span class="vpi-chevron-right caret-icon" data-v-d0c9dde2></span></div></div><div class="items" data-v-d0c9dde2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/about/" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>ä¸ªäººç®€ä»‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d0c9dde2 data-v-d0c9dde2><div class="item" data-v-d0c9dde2><div class="indicator" data-v-d0c9dde2></div><a class="VPLink link link" href="/about/sites" data-v-d0c9dde2><!--[--><p class="text" data-v-d0c9dde2>ä¸ªäººç«™ç‚¹</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a20dac data-v-c2391fd9><div class="VPDoc has-sidebar has-aside" data-v-c2391fd9 data-v-3665568b><!--[--><!--]--><div class="container" data-v-3665568b><div class="aside" data-v-3665568b><div class="aside-curtain" data-v-3665568b></div><div class="aside-container" data-v-3665568b><div class="aside-content" data-v-3665568b><div class="VPDocAside" data-v-3665568b data-v-7884ab7c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-7884ab7c data-v-91a983e3><div class="content" data-v-91a983e3><div class="outline-marker" data-v-91a983e3></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-91a983e3>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-91a983e3 data-v-21aab9eb><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-7884ab7c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3665568b><div class="content-container" data-v-3665568b><!--[--><!--]--><main class="main" data-v-3665568b><div style="position:relative;" class="vp-doc _notes_frontend_preview_backend_idea_07-Gorm%20%E4%BD%BF%E7%94%A8" data-v-3665568b><div><h1 id="_07-gorm-ä½¿ç”¨" tabindex="-1">07-Gorm ä½¿ç”¨ <a class="header-anchor" href="#_07-gorm-ä½¿ç”¨" aria-label="Permalink to &quot;07-Gorm ä½¿ç”¨&quot;">â€‹</a></h1><h1 id="_07-gorm-ä½¿ç”¨-1" tabindex="-1">07-Gorm ä½¿ç”¨ <a class="header-anchor" href="#_07-gorm-ä½¿ç”¨-1" aria-label="Permalink to &quot;07-Gorm ä½¿ç”¨&quot;">â€‹</a></h1><p>è®²è§£ä¸€ä¸‹ Gorm çš„é’©å­å‡½æ•°</p><p>GORM æ˜¯ Go è¯­è¨€ä¸­æœ€æµè¡Œçš„ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰åº“ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—<strong>é’©å­å‡½æ•°ï¼ˆHook Functionsï¼‰</strong> ç”¨äºåœ¨æ•°æ®åº“æ“ä½œå‰åè‡ªåŠ¨æ‰§è¡Œç‰¹å®šé€»è¾‘ã€‚è¿™äº›é’©å­å¯ä»¥ç”¨æ¥åšæ•°æ®æ ¡éªŒã€å­—æ®µè‡ªåŠ¨å¡«å……ï¼ˆå¦‚ <code>CreatedAt</code>â€‹ å’Œ <code>UpdatedAt</code>ï¼‰ã€æƒé™æ§åˆ¶ã€æ—¥å¿—è®°å½•ç­‰ã€‚</p><hr><h2 id="ğŸ§©-gorm-é’©å­çš„ç±»å‹" tabindex="-1">ğŸ§© GORM é’©å­çš„ç±»å‹ <a class="header-anchor" href="#ğŸ§©-gorm-é’©å­çš„ç±»å‹" aria-label="Permalink to &quot;ğŸ§© GORM é’©å­çš„ç±»å‹&quot;">â€‹</a></h2><p>GORM æ”¯æŒä»¥ä¸‹ä¸»è¦æ“ä½œçš„é’©å­ï¼š</p><table tabindex="0"><thead><tr><th>æ“ä½œ</th><th>å‰ç½®é’©å­ï¼ˆBeforeï¼‰</th><th>åç½®é’©å­ï¼ˆAfterï¼‰</th></tr></thead><tbody><tr><td>åˆ›å»ºï¼ˆCreateï¼‰</td><td>BeforeCreate</td><td>AfterCreate</td></tr><tr><td>æ›´æ–°ï¼ˆUpdateï¼‰</td><td>BeforeUpdate</td><td>AfterUpdate</td></tr><tr><td>ä¿å­˜ï¼ˆSaveï¼‰</td><td>BeforeSave</td><td>AfterSave</td></tr><tr><td>åˆ é™¤ï¼ˆDeleteï¼‰</td><td>BeforeDelete</td><td>AfterDelete</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼š<code>Save</code>â€‹ æ“ä½œæ˜¯ <code>Create</code>â€‹ æˆ– <code>Update</code> çš„ç»Ÿç§°ï¼Œæ ¹æ®ä¸»é”®æ˜¯å¦å­˜åœ¨å†³å®šè¡Œä¸ºã€‚</p></blockquote><p>æ­¤å¤–è¿˜æœ‰ï¼š</p><ul><li><strong>BeforeFind / AfterFind</strong>ï¼šç”¨äºæŸ¥è¯¢å‰åçš„å¤„ç†</li><li><strong>BeforeAssociation / AfterAssociation</strong>ï¼šç”¨äºå¤„ç†å…³è”æ“ä½œ</li></ul><hr><h2 id="ğŸ“Œ-ä½¿ç”¨æ–¹å¼" tabindex="-1">ğŸ“Œ ä½¿ç”¨æ–¹å¼ <a class="header-anchor" href="#ğŸ“Œ-ä½¿ç”¨æ–¹å¼" aria-label="Permalink to &quot;ğŸ“Œ ä½¿ç”¨æ–¹å¼&quot;">â€‹</a></h2><p>é’©å­å‡½æ•°å®šä¹‰ä¸ºç»“æ„ä½“çš„æ–¹æ³•ï¼Œå¹¶éµå¾ªå‘½åè§„èŒƒï¼š</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeforeCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨åˆ›å»ºä¹‹å‰æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    u.CreatedAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AfterCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åˆ›å»ºåæ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·å·²åˆ›å»º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦å®ç°ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªé’©å­ã€‚</p><hr><h2 id="âœ…-ç¤ºä¾‹-ä½¿ç”¨é’©å­è‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³" tabindex="-1">âœ… ç¤ºä¾‹ï¼šä½¿ç”¨é’©å­è‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³ <a class="header-anchor" href="#âœ…-ç¤ºä¾‹-ä½¿ç”¨é’©å­è‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³" aria-label="Permalink to &quot;âœ… ç¤ºä¾‹ï¼šä½¿ç”¨é’©å­è‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³&quot;">â€‹</a></h2><p>å‡è®¾ä½ ä¸æƒ³ç”¨ GORM é»˜è®¤çš„æ—¶é—´æˆ³ç®¡ç†ï¼Œè€Œæ˜¯è‡ªå·±å®ç°ï¼š</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ID        </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Name      </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CreatedAt </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Time</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UpdatedAt </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Time</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeforeCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    u.CreatedAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeforeUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    u.UpdatedAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è¿™æ ·å°±å¯ä»¥è‡ªå®šä¹‰æ—¶é—´å­—æ®µçš„å€¼ã€‚</p><hr><h2 id="âš ï¸-æ³¨æ„äº‹é¡¹" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;âš ï¸ æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><ol><li><strong>äº‹åŠ¡æ”¯æŒ</strong>ï¼šé’©å­æ˜¯åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœé’©å­è¿”å›é”™è¯¯ï¼Œæ•´ä¸ªæ“ä½œä¼šå›æ»šã€‚</li><li><strong>é¿å…å¾ªç¯è°ƒç”¨</strong>ï¼šé’©å­å†…éƒ¨å†æ¬¡è°ƒç”¨ GORM æ“ä½œå¯èƒ½ä¼šé€ æˆæ­»å¾ªç¯ã€‚</li><li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šä¸è¦åœ¨é’©å­é‡Œåšå¤ªè€—æ—¶çš„æ“ä½œã€‚</li><li><strong>é’©å­å‚æ•°</strong>ï¼šæ‰€æœ‰é’©å­éƒ½æ¥æ”¶ä¸€ä¸ª <code>*gorm.DB</code> ç±»å‹çš„äº‹åŠ¡å¥æŸ„ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå…¶ä»– DB æ“ä½œã€‚</li></ol><hr><h2 id="ğŸ”-è·³è¿‡é’©å­" tabindex="-1">ğŸ” è·³è¿‡é’©å­ <a class="header-anchor" href="#ğŸ”-è·³è¿‡é’©å­" aria-label="Permalink to &quot;ğŸ” è·³è¿‡é’©å­&quot;">â€‹</a></h2><p>æœ‰æ—¶å€™ä½ å¸Œæœ›è·³è¿‡é’©å­ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œå¯ä»¥ç”¨ <code>Session</code> è®¾ç½®ï¼š</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{SkipHooks: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æˆ–è€…æ›´æ–°æ—¶ï¼š</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{SkipHooks: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="ğŸ“š-æ€»ç»“" tabindex="-1">ğŸ“š æ€»ç»“ <a class="header-anchor" href="#ğŸ“š-æ€»ç»“" aria-label="Permalink to &quot;ğŸ“š æ€»ç»“&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é’©å­ä½œç”¨</td><td>åœ¨æ•°æ®åº“æ“ä½œå‰åæ’å…¥è‡ªå®šä¹‰é€»è¾‘</td></tr><tr><td>æ”¯æŒæ“ä½œ</td><td>Createã€Updateã€Deleteã€Saveã€Find ç­‰</td></tr><tr><td>å®ç°æ–¹å¼</td><td>å®šä¹‰ç»“æ„ä½“æ–¹æ³•ï¼ˆå¦‚ <code>BeforeCreate</code>â€‹, <code>AfterUpdate</code>ï¼‰</td></tr><tr><td>æ§åˆ¶æœºåˆ¶</td><td>å¯é€šè¿‡ <code>SkipHooks</code> è·³è¿‡é’©å­</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>è‡ªåŠ¨èµ‹å€¼ã€éªŒè¯ã€å®¡è®¡æ—¥å¿—ã€ç¼“å­˜æ¸…ç†ç­‰</td></tr></tbody></table><hr><p>å¦‚æœä½ æœ‰å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚è½¯åˆ é™¤ã€æ—¥å¿—è®°å½•ã€æƒé™æ§åˆ¶ï¼‰ï¼Œæˆ‘å¯ä»¥ç»™å‡ºæ›´å…·ä½“çš„é’©å­å®ç°ç¤ºä¾‹ã€‚æ¬¢è¿ç»§ç»­æé—®ï¼</p><p>â€</p><h2 id="sqlite-gorm-æ“ä½œ" tabindex="-1">SQLite + Gorm æ“ä½œ <a class="header-anchor" href="#sqlite-gorm-æ“ä½œ" aria-label="Permalink to &quot;SQLite + Gorm æ“ä½œ&quot;">â€‹</a></h2><blockquote><p>è½¯åˆ é™¤ã€æ—¥å¿—è®°å½•ã€æƒé™æ§åˆ¶ï¼Œè®²è§£ Gorm çš„è¿™å‡ ç§æ“ä½œï¼Œå¹¶ä¸”ä¸ºæˆ‘å®ç°ä¸€ä¸ª Gorm é…åˆ SQLite è¿›è¡Œç™»å½•æ³¨å†Œã€è·å–ç”¨æˆ·åˆ—è¡¨ã€è®¾ç½®ç”¨æˆ·æƒé™å…³è”ä¸¤å¼ è¡¨ã€æƒé™ã€ç”¨æˆ·ã€‘çš„ä¸€ä¸ªæ“ä½œï¼Œå®ç°ç®¡ç†å‘˜ã€ç”¨æˆ·çš„ä¸¤ä¸ªåŒºåˆ†ã€‚</p></blockquote><p>æ˜ç™½äº†ï¼ä½ å¸Œæœ›æˆ‘å®ç°ä¸€ä¸ªä½¿ç”¨ <strong>GORM + SQLite</strong> çš„ Go ç¤ºä¾‹é¡¹ç›®ï¼Œå…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š</p><hr><h3 id="âœ…-åŠŸèƒ½éœ€æ±‚æ€»ç»“" tabindex="-1">âœ… åŠŸèƒ½éœ€æ±‚æ€»ç»“ <a class="header-anchor" href="#âœ…-åŠŸèƒ½éœ€æ±‚æ€»ç»“" aria-label="Permalink to &quot;âœ… åŠŸèƒ½éœ€æ±‚æ€»ç»“&quot;">â€‹</a></h3><ol><li><strong>ç™»å½•ä¸æ³¨å†Œ</strong></li><li><strong>ç”¨æˆ·åˆ—è¡¨è·å–</strong></li><li><strong>æƒé™ç®¡ç†ï¼ˆç®¡ç†å‘˜ / æ™®é€šç”¨æˆ·ï¼‰</strong></li><li><strong>æƒé™ä¸ç”¨æˆ·è¡¨å…³è”ï¼šä¸€å¼ ç”¨æˆ·è¡¨ + ä¸€å¼ æƒé™è¡¨</strong></li><li><strong>ä½¿ç”¨é’©å­å‡½æ•°å¤„ç†è‡ªåŠ¨å¡«å……ã€æ—¥å¿—è®°å½•ç­‰</strong></li><li><strong>è½¯åˆ é™¤æ”¯æŒï¼ˆSoft Deleteï¼‰</strong></li></ol><hr><h2 id="ğŸ“¦-æ•°æ®ç»“æ„è®¾è®¡" tabindex="-1">ğŸ“¦ æ•°æ®ç»“æ„è®¾è®¡ <a class="header-anchor" href="#ğŸ“¦-æ•°æ®ç»“æ„è®¾è®¡" aria-label="Permalink to &quot;ğŸ“¦ æ•°æ®ç»“æ„è®¾è®¡&quot;">â€‹</a></h2><p>æˆ‘ä»¬è®¾è®¡ä¸¤ä¸ªæ ¸å¿ƒè¡¨ï¼š</p><h3 id="_1-ç”¨æˆ·è¡¨-users" tabindex="-1">1. ç”¨æˆ·è¡¨ (<code>users</code>) <a class="header-anchor" href="#_1-ç”¨æˆ·è¡¨-users" aria-label="Permalink to &quot;1. ç”¨æˆ·è¡¨ (`users`)&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>uint</td><td>ä¸»é”®</td></tr><tr><td>username</td><td>string</td><td>ç”¨æˆ·å</td></tr><tr><td>password</td><td>string</td><td>å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰</td></tr><tr><td>role_id</td><td>uint</td><td>å¤–é”® -&gt; roles.id</td></tr><tr><td>deleted_at</td><td>gorm.DeletedAt</td><td>è½¯åˆ é™¤æ—¶é—´æˆ³</td></tr></tbody></table><h3 id="_2-æƒé™è¡¨-roles" tabindex="-1">2. æƒé™è¡¨ (<code>roles</code>) <a class="header-anchor" href="#_2-æƒé™è¡¨-roles" aria-label="Permalink to &quot;2. æƒé™è¡¨ (`roles`)&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>uint</td><td>ä¸»é”®</td></tr><tr><td>name</td><td>string</td><td>è§’è‰²åç§°ï¼ˆå¦‚ admin/userï¼‰</td></tr></tbody></table><hr><h2 id="ğŸ”§-æ‰€éœ€ä¾èµ–" tabindex="-1">ğŸ”§ æ‰€éœ€ä¾èµ– <a class="header-anchor" href="#ğŸ”§-æ‰€éœ€ä¾èµ–" aria-label="Permalink to &quot;ğŸ”§ æ‰€éœ€ä¾èµ–&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gorm.io/gorm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gorm.io/driver/sqlite</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h2 id="ğŸ’»-ç¤ºä¾‹ä»£ç ç»“æ„" tabindex="-1">ğŸ’» ç¤ºä¾‹ä»£ç ç»“æ„ <a class="header-anchor" href="#ğŸ’»-ç¤ºä¾‹ä»£ç ç»“æ„" aria-label="Permalink to &quot;ğŸ’» ç¤ºä¾‹ä»£ç ç»“æ„&quot;">â€‹</a></h2><h3 id="main-go" tabindex="-1"><code>main.go</code> <a class="header-anchor" href="#main-go" aria-label="Permalink to &quot;`main.go`&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm.io/driver/sqlite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm.io/gorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ID   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Username   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Password   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    RoleID     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å…³è”è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Role       </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `gorm:&quot;foreignKey:RoleID&quot;`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DeletedAt  </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeletedAt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `gorm:&quot;index&quot;`</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è½¯åˆ é™¤å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œå‰çš„é’©å­ï¼šè®¾ç½®é»˜è®¤è§’è‰²ä¸º user</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeforeCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BeforeCreate hook called&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œåçš„é’©å­ï¼šè®°å½•æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AfterCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·å·²åˆ›å»º: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u.Username)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gorm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sqlite.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        panic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿æ¥æ•°æ®åº“å¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AutoMigrate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupRoles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> role </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">First</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">role)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Username: username,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Password: password, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®é™…ä¸­åº”ç”¨ bcrypt åŠ å¯†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RoleID:   role.ID,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ³¨å†ŒæˆåŠŸ:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, username)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Preload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username = ? AND password = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, username, password).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">First</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.Error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•å¤±è´¥:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.Error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•æˆåŠŸ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> , è§’è‰²: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, user.Username, user.Role.Name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> listUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Preload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _, u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, è§’è‰²: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u.Username, u.Role.Name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> promoteToAdmin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> role </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">First</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">role)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, username).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RoleID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, role.ID)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å·²è¢«æå‡ä¸ºç®¡ç†å‘˜</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, username)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setupRoles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ³¨å†Œä¸‰ä¸ªç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    registerUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    registerUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcdef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç™»å½•æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wrongpass&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è·å–ç”¨æˆ·åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    listUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æå‡ bob ä¸ºç®¡ç†å‘˜</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    promoteToAdmin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å†æ¬¡åˆ—å‡ºç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    listUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åˆ é™¤æŸä¸ªç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·²è½¯åˆ é™¤ alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æŸ¥è¯¢æ‰€æœ‰æœªåˆ é™¤çš„ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    listUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br></div></div><hr><h2 id="ğŸ§ª-è¾“å‡ºç¤ºä¾‹" tabindex="-1">ğŸ§ª è¾“å‡ºç¤ºä¾‹ <a class="header-anchor" href="#ğŸ§ª-è¾“å‡ºç¤ºä¾‹" aria-label="Permalink to &quot;ğŸ§ª è¾“å‡ºç¤ºä¾‹&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>BeforeCreate hook called</span></span>
<span class="line"><span>ç”¨æˆ·å·²åˆ›å»º: alice</span></span>
<span class="line"><span>æ³¨å†ŒæˆåŠŸ: alice</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ç™»å½•æˆåŠŸ: alice , è§’è‰²: user</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ç”¨æˆ·: alice, è§’è‰²: user</span></span>
<span class="line"><span>ç”¨æˆ·: bob, è§’è‰²: user</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>bob å·²è¢«æå‡ä¸ºç®¡ç†å‘˜</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ç”¨æˆ·: alice, è§’è‰²: user</span></span>
<span class="line"><span>ç”¨æˆ·: bob, è§’è‰²: admin</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>å·²è½¯åˆ é™¤ alice</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ç”¨æˆ·: bob, è§’è‰²: admin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><hr><h2 id="ğŸ§©-é’©å­è¯¦è§£è¡¥å……" tabindex="-1">ğŸ§© é’©å­è¯¦è§£è¡¥å…… <a class="header-anchor" href="#ğŸ§©-é’©å­è¯¦è§£è¡¥å……" aria-label="Permalink to &quot;ğŸ§© é’©å­è¯¦è§£è¡¥å……&quot;">â€‹</a></h2><h3 id="âœ…-gorm-è‡ªå¸¦æ—¥å¿—é’©å­" tabindex="-1">âœ… GORM è‡ªå¸¦æ—¥å¿—é’©å­ <a class="header-anchor" href="#âœ…-gorm-è‡ªå¸¦æ—¥å¿—é’©å­" aria-label="Permalink to &quot;âœ… GORM è‡ªå¸¦æ—¥å¿—é’©å­&quot;">â€‹</a></h3><p>ä½ å¯ä»¥é€šè¿‡åˆå§‹åŒ–æ—¶è®¾ç½®æ—¥å¿—è¾“å‡ºï¼š</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gorm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sqlite.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gorm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Logger: logger.Default.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(logger.Info),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="â›”ï¸-è½¯åˆ é™¤æœºåˆ¶åŸç†" tabindex="-1">â›”ï¸ è½¯åˆ é™¤æœºåˆ¶åŸç† <a class="header-anchor" href="#â›”ï¸-è½¯åˆ é™¤æœºåˆ¶åŸç†" aria-label="Permalink to &quot;â›”ï¸ è½¯åˆ é™¤æœºåˆ¶åŸç†&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ <code>gorm.DeletedAt</code> ç±»å‹å­—æ®µï¼Œä»£æ›¿ç‰©ç†åˆ é™¤</li><li>æŸ¥è¯¢ä¼šè‡ªåŠ¨è¿‡æ»¤æ‰ <code>deleted_at IS NOT NULL</code> çš„è¡Œ</li><li>ä½¿ç”¨ <code>.Unscoped()</code> å¯ä»¥æŸ¥è¯¢è½¯åˆ çš„æ•°æ®</li></ul><hr><h2 id="ğŸ§ -å»¶ä¼¸æ–¹å‘" tabindex="-1">ğŸ§  å»¶ä¼¸æ–¹å‘ <a class="header-anchor" href="#ğŸ§ -å»¶ä¼¸æ–¹å‘" aria-label="Permalink to &quot;ğŸ§  å»¶ä¼¸æ–¹å‘&quot;">â€‹</a></h2><p>âœ… æ”¯æŒ JWT ç™»å½•è®¤è¯ âœ… ç”¨ RESTful API æ„å»º Web æ¥å£ âœ… é…åˆä¸­é—´ä»¶è¿›è¡Œæƒé™æ§åˆ¶ï¼ˆåªå…è®¸ admin åˆ›å»ºç”¨æˆ·ï¼‰ âœ… ä½¿ç”¨ bcrypt å¯¹å¯†ç åŠ å¯† âœ… æ·»åŠ éªŒè¯ç ã€é‚®ç®±éªŒè¯ç­‰é€»è¾‘</p><hr><h2 id="âœ…-æ€»ç»“" tabindex="-1">âœ… æ€»ç»“ <a class="header-anchor" href="#âœ…-æ€»ç»“" aria-label="Permalink to &quot;âœ… æ€»ç»“&quot;">â€‹</a></h2><p>æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ GORM å’Œ SQLite å®ç°ä¸€ä¸ªåŸºç¡€çš„ç”¨æˆ·ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š</p><table tabindex="0"><thead><tr><th>åŠŸèƒ½</th><th>æ˜¯å¦å®ç°</th></tr></thead><tbody><tr><td>æ³¨å†Œ / ç™»å½•</td><td>âœ…</td></tr><tr><td>è§’è‰²æƒé™æ§åˆ¶</td><td>âœ…</td></tr><tr><td>è½¯åˆ é™¤æ”¯æŒ</td><td>âœ…</td></tr><tr><td>é’©å­å‡½æ•°ä½¿ç”¨</td><td>âœ…</td></tr><tr><td>GORM å…³è”æŸ¥è¯¢</td><td>âœ…</td></tr></tbody></table><p>â€</p></div></div></main><footer class="VPDocFooter" data-v-3665568b data-v-63c9e317><!--[--><!--[--><!--[--><!--[--><div class="doc-comments"><!----></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-63c9e317><!----><div class="last-updated" data-v-63c9e317><p class="VPLastUpdated" data-v-63c9e317 data-v-65cd4285>æœ€åæ›´æ–°äº: <time datetime="2025-12-03T19:06:00.000Z" data-v-65cd4285></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-63c9e317><span class="visually-hidden" id="doc-footer-aria-label" data-v-63c9e317>Pager</span><div class="pager" data-v-63c9e317><!----></div><div class="pager" data-v-63c9e317><a class="VPLink link pager-link next" href="/tasks/" data-v-63c9e317><!--[--><span class="desc" data-v-63c9e317>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-63c9e317>ğŸš€ ä»»åŠ¡æ¸…å•</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><div class="m-doc-footer" style="" data-v-694eb995><div class="m-doc-footer-message" data-v-694eb995><img class="visitor" src="https://visitor-badge.laobi.icu/badge?page_id=maomao1996.vitepress-nav-template./notes/frontend/preview/backend/idea/07-Gorm%20%E4%BD%BF%E7%94%A8" title="å½“å‰é¡µé¢ç´¯è®¡è®¿é—®æ•°" onerror="this.style.display=&#39;none&#39;" data-v-694eb995><p data-v-694eb995>è®°å½•å­¦ä¹ ã€å®è·µä¸æ€è€ƒ</p></div><p class="m-doc-footer-copyright" data-v-694eb995>Copyright Â© 2024-present fromsko</p></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-c6a20dac data-v-4d3bc719><div class="container" data-v-4d3bc719><p class="message" data-v-4d3bc719>è®°å½•å­¦ä¹ ã€å®è·µä¸æ€è€ƒ</p><p class="copyright" data-v-4d3bc719>Copyright Â© 2024-present fromsko</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about_index.md\":\"BfHQja1o\",\"about_sites.md\":\"CRL6Tu8m\",\"ai_index.md\":\"BK6AyZp6\",\"index.md\":\"C_yDJyDI\",\"learning_books_index.md\":\"Cqz_JP4b\",\"learning_courses_index.md\":\"rWdZf2sr\",\"learning_index.md\":\"LPe8NjUW\",\"nav_index.md\":\"lhdI7bRl\",\"notes_backend_android_harmony_base.md\":\"D9sLHLoU\",\"notes_backend_android_java_containerå®ç°.md\":\"Bgul-cjY\",\"notes_backend_android_java_luaè®¾è®¡æ¨¡å¼.md\":\"BJlFyW-U\",\"notes_backend_android_kotlin_kotlin è¯­æ³•è¯¦è§£.md\":\"D4cSQsJg\",\"notes_backend_android_lua_androlua.md\":\"0MFgBVf4\",\"notes_backend_android_lua_fas.md\":\"B7hpNUn6\",\"notes_backend_android_lua_faå®ä¾‹ä»£ç .md\":\"CfS_Il7t\",\"notes_backend_android_lua_faå¸ƒå±€ä»£ç .md\":\"C02ASQf2\",\"notes_backend_android_lua_façˆ¬è™«æ•™ç¨‹.md\":\"DH2QSwaf\",\"notes_backend_android_lua_lntent.md\":\"YBcqZd5K\",\"notes_backend_android_lua_å…¶ä»–.md\":\"BgWk2W2l\",\"notes_backend_android_lua_åŸºç¡€.md\":\"BBeMb6bH\",\"notes_backend_android_lua_å®ç”¨.md\":\"CB7OQkmz\",\"notes_backend_android_lua_å±æ€§ä»£ç .md\":\"WJGgIOmt\",\"notes_backend_android_lua_å¸ƒå±€.md\":\"BgAQnDxo\",\"notes_backend_android_lua_æ–‡ä»¶.md\":\"6ko3neez\",\"notes_backend_android_lua_ç”¨æˆ·ç•Œé¢-alua.md\":\"acKupm2h\",\"notes_backend_android_lua_ç•Œé¢.md\":\"8FQeFtts\",\"notes_backend_android_lua_ç¬”è®°.md\":\"B8AhK1bW\",\"notes_backend_android_lua_ç½‘ç»œ.md\":\"Ca3KN7bQ\",\"notes_backend_container_docker å®¹å™¨æŠ€æœ¯.md\":\"BdkYy1s0\",\"notes_backend_database_oracle-æ•°æ®åº“ç¬”è®°.md\":\"BIHgd7bz\",\"notes_backend_index.md\":\"BgP5aGFz\",\"notes_frontend_daisyuiè®¾è®¡.md\":\"Bx43sfZ_\",\"notes_frontend_index.md\":\"CQUfDKTl\",\"notes_frontend_preview_ai çŸ¥è¯†é—®ç­”.md\":\"DrAhtHMA\",\"notes_frontend_preview_ai_01-è°·æ­Œ-ç«™ç‚¹-æ¨¡æ‹Ÿé¢è¯•.md\":\"BYQh2RC3\",\"notes_frontend_preview_ai_02-è°·æ­Œ-ç«™ç‚¹-ä¸ªäººåšå®¢.md\":\"8VilC3B0\",\"notes_frontend_preview_ai_02-è°·æ­Œ-ç«™ç‚¹-ä¸ªäººåšå®¢_åŸºäºaié©±åŠ¨çš„ä¸ªæ€§åŒ–ä¸ªäººåšå®¢å±•ç¤ºç«™ç‚¹å¼€å‘æŠ¥å‘Š.md\":\"BlZmPI4T\",\"notes_frontend_preview_ai_03-n8n ä½¿ç”¨.md\":\"C0MhWSS_\",\"notes_frontend_preview_ai_04-schema.md\":\"BecE8KuW\",\"notes_frontend_preview_ai_05-gemini å¼‚å¸¸.md\":\"CntgXfQF\",\"notes_frontend_preview_ai_06-napi å¹³å°æ„å»º.md\":\"B7izBQGA\",\"notes_frontend_preview_ai_07-promptagent.md\":\"B92nU2ma\",\"notes_frontend_preview_ai_08-python å·¥å…·é€‰æ‹©.md\":\"BtW0p8Ge\",\"notes_frontend_preview_ai_09-è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆagentï¼‰.md\":\"J1AXCaPR\",\"notes_frontend_preview_ai_ai-agent-notebook.md\":\"DzIhlT0i\",\"notes_frontend_preview_ai_assets_åŸºäºaié©±åŠ¨çš„ä¸ªæ€§åŒ–ä¸ªäººåšå®¢å±•ç¤ºç«™ç‚¹å¼€å‘æŠ¥å‘Š-20251027120900-2aaaseu.md\":\"DwKioO7a\",\"notes_frontend_preview_ai_pydantic-ai-agents.md\":\"BX6sCjXZ\",\"notes_frontend_preview_ai_readmd.md\":\"BRWFYvv7\",\"notes_frontend_preview_ai_ç¿»è¯‘ç½‘ç«™è°ƒç ”.md\":\"CnCPLQ-M\",\"notes_frontend_preview_backend_idea_01-åˆ·é¢˜è½¯ä»¶.md\":\"Dp3gGKPu\",\"notes_frontend_preview_backend_idea_02-è½¯ä»¶è®¾è®¡å¸ˆä¸­çº§.md\":\"Ce81mnmi\",\"notes_frontend_preview_backend_idea_03-å¸¸ç”¨ä»£ç .md\":\"CVaLkn-0\",\"notes_frontend_preview_backend_idea_04-éƒ¨ç½²å¹³å°è¿›è¡Œæµé‡ä»£ç†.md\":\"DnZYt5_N\",\"notes_frontend_preview_backend_idea_05-docker å¿«æ·æ‰‹å†Œ.md\":\"C5f9tY9Y\",\"notes_frontend_preview_backend_idea_06-mac æ‰“ç‡•äº‘.md\":\"ud81yrmX\",\"notes_frontend_preview_backend_idea_07-gorm ä½¿ç”¨.md\":\"DfDxfYgI\",\"notes_frontend_preview_backend_idea_07-gorm ä½¿ç”¨_å¿«æ· gorm ä½¿ç”¨.md\":\"CGpPeeHf\",\"notes_frontend_preview_backend_idea_07-gorm ä½¿ç”¨_è½¯åˆ é™¤æœºåˆ¶.md\":\"CXZSiwMV\",\"notes_frontend_preview_backend_idea_08-å®‰è½¬è„šæœ¬.md\":\"k5LxNxrV\",\"notes_frontend_preview_backend_java_assets_baomidou mybatis-plus å®Œæ•´å­¦ä¹ æŒ‡å—-20251027120901-n9qi5hr.md\":\"DaHAmkvH\",\"notes_frontend_preview_backend_java_java åŸºç¡€.md\":\"CTRotLTD\",\"notes_frontend_preview_backend_java_maven.md\":\"DmyRESJw\",\"notes_frontend_preview_backend_java_mybatis.md\":\"BMX44KXb\",\"notes_frontend_preview_backend_java_mybatis_20250710-220006.md\":\"C5x7BCBk\",\"notes_frontend_preview_backend_java_mybatis_baomidou (mybatis-plus) å®Œæ•´å­¦ä¹ æŒ‡å—.md\":\"CJl04trr\",\"notes_frontend_preview_backend_java_mybatis_mybatis-plus æ¡ä»¶æŸ¥è¯¢æ€»ç»“.md\":\"C-WW8Sc-\",\"notes_frontend_preview_backend_java_springai.md\":\"CdoukuYS\",\"notes_frontend_preview_backend_java_springboot é¡¹ç›®.md\":\"BCfAcwbg\",\"notes_frontend_preview_backend_java_sql æ•°æ®åº“-ä½œä¸š.md\":\"B01OO2uj\",\"notes_frontend_preview_backend_java_sql æ•°æ®åº“-æŠ€æœ¯.md\":\"DIRpblZV\",\"notes_frontend_preview_backend_java_å°šç¡…è°·.md\":\"BOPDITC9\",\"notes_frontend_preview_backend_java_å·¥ç¨‹ç»“æ„.md\":\"Br-AhcMu\",\"notes_frontend_preview_backend_java_è€ƒè¯•_ç¬¬ä¸€æ¬¡è€ƒè¯•.md\":\"B3djG5VU\",\"notes_frontend_preview_backend_java_é¡¹ç›®ç»“æ„æºç åˆ†æ.md\":\"DlBjQsBA\",\"notes_frontend_preview_backend_readmd.md\":\"DgTY6bZk\",\"notes_frontend_preview_graphene.md\":\"CVccUkML\",\"notes_frontend_preview_imgui å„ç±»ç»„ä»¶åº“.md\":\"ZYNNO5QM\",\"notes_frontend_preview_java-web.md\":\"BUqGDoDx\",\"notes_frontend_preview_mybatis.md\":\"BIPm4Vm9\",\"notes_frontend_preview_sql.md\":\"Cy1Lmxvp\",\"notes_frontend_preview_vue å¼€å‘é—®é¢˜æ±‡é›†.md\":\"DHkHC9d8\",\"notes_frontend_preview_vue-router.md\":\"Bo7aveJn\",\"notes_frontend_preview_ä¸ªäººé¡¹ç›®.md\":\"BLUXLxXP\",\"notes_frontend_preview_å‰ç«¯è¿›é˜¶å­¦ä¹ .md\":\"Bx7YOSYo\",\"notes_frontend_readme.md\":\"FPxqdOHl\",\"notes_frontend_å·§å¦™åœ°è®¾è®¡.md\":\"0xoE7Kzg\",\"notes_frontend_å¿ƒæ€å°æŠ€å·§.md\":\"CDuc6KK0\",\"notes_frontend_é¢è¯•å¿ƒå¾—æŒ‡å—.md\":\"CyRegg0b\",\"notes_index.md\":\"i18XDiNS\",\"notes_tools_index.md\":\"DYTqZz-Y\",\"projects_index.md\":\"Cp53wfL-\",\"tasks_index.md\":\"B7F1RXgG\",\"test.md\":\"C20ooFx4\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"fromsko çŸ¥è¯†åº“\",\"description\":\"fromsko çš„ä¸ªäººçŸ¥è¯†åº“ï¼Œè®°å½•å­¦ä¹ ã€å®è·µä¸æ€è€ƒ\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"i18nRouting\":false,\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"å‰ç«¯å¯¼èˆª\",\"link\":\"/nav/\"}],\"sidebar\":{\"/\":[{\"text\":\"ğŸš€ ä»»åŠ¡æ¸…å•\",\"link\":\"/tasks/\"},{\"text\":\"ğŸ“ æŠ€æœ¯ç¬”è®°\",\"link\":\"/notes/\",\"collapsed\":false,\"items\":[{\"text\":\"å‰ç«¯å¼€å‘\",\"link\":\"/notes/frontend/\",\"collapsed\":true,\"items\":[{\"text\":\"æ ¸å¿ƒç¬”è®°\",\"link\":\"/notes/frontend/\"},{\"text\":\"daisyUI è®¾è®¡\",\"link\":\"/notes/frontend/daisyUIè®¾è®¡\"},{\"text\":\"é¢è¯•å¿ƒå¾—æŒ‡å—\",\"link\":\"/notes/frontend/é¢è¯•å¿ƒå¾—æŒ‡å—\"},{\"text\":\"å¿ƒæ€å°æŠ€å·§\",\"link\":\"/notes/frontend/å¿ƒæ€å°æŠ€å·§\"},{\"text\":\"AI ç›¸å…³\",\"collapsed\":true,\"items\":[{\"text\":\"AI çŸ¥è¯†é—®ç­”\",\"link\":\"/notes/frontend/preview/AI çŸ¥è¯†é—®ç­”\"},{\"text\":\"n8n ä½¿ç”¨\",\"link\":\"/notes/frontend/preview/ai/03-n8n ä½¿ç”¨\"},{\"text\":\"PromptAgent\",\"link\":\"/notes/frontend/preview/ai/07-PromptAgent\"},{\"text\":\"AI Agent å¼€å‘\",\"link\":\"/notes/frontend/preview/ai/AI-agent-notebook\"}]},{\"text\":\"Vue ç”Ÿæ€\",\"collapsed\":true,\"items\":[{\"text\":\"Vue å¼€å‘é—®é¢˜\",\"link\":\"/notes/frontend/preview/Vue å¼€å‘é—®é¢˜æ±‡é›†\"},{\"text\":\"vue-router\",\"link\":\"/notes/frontend/preview/vue-router\"}]},{\"text\":\"å¼€å‘å·¥å…·\",\"collapsed\":true,\"items\":[{\"text\":\"VSCode æ’ä»¶å¼€å‘\",\"link\":\"/notes/frontend/preview/Vscode æ’ä»¶å¼€å‘\"},{\"text\":\"Tailwind CSS\",\"link\":\"/notes/frontend/preview/tailwindcss\"},{\"text\":\"CSS å­¦ä¹ æŒ‡å—\",\"link\":\"/notes/frontend/preview/css å­¦ä¹ æŒ‡å—\"}]}]},{\"text\":\"åç«¯å¼€å‘\",\"link\":\"/notes/backend/\",\"collapsed\":true,\"items\":[{\"text\":\"åç«¯ç¬”è®°æ€»è§ˆ\",\"link\":\"/notes/backend/\"},{\"text\":\"Android å¼€å‘\",\"collapsed\":true,\"items\":[{\"text\":\"HarmonyOS\",\"link\":\"/notes/backend/android/harmony/Base\"},{\"text\":\"Kotlin è¯­æ³•\",\"link\":\"/notes/backend/android/kotlin/Kotlin è¯­æ³•è¯¦è§£\"},{\"text\":\"Lua (Android)\",\"collapsed\":true,\"items\":[{\"text\":\"Androlua\",\"link\":\"/notes/backend/android/lua/androlua\"},{\"text\":\"Lua åŸºç¡€\",\"link\":\"/notes/backend/android/lua/åŸºç¡€\"},{\"text\":\"Lua å®ç”¨\",\"link\":\"/notes/backend/android/lua/å®ç”¨\"},{\"text\":\"Fa å®ä¾‹ä»£ç \",\"link\":\"/notes/backend/android/lua/Faå®ä¾‹ä»£ç \"},{\"text\":\"Fa å¸ƒå±€ä»£ç \",\"link\":\"/notes/backend/android/lua/Faå¸ƒå±€ä»£ç \"},{\"text\":\"Fa çˆ¬è™«æ•™ç¨‹\",\"link\":\"/notes/backend/android/lua/Façˆ¬è™«æ•™ç¨‹\"}]}]},{\"text\":\"Docker å®¹å™¨\",\"link\":\"/notes/backend/container/Docker å®¹å™¨æŠ€æœ¯\"},{\"text\":\"Oracle æ•°æ®åº“\",\"link\":\"/notes/backend/database/Oracle-æ•°æ®åº“ç¬”è®°\"}]},{\"text\":\"å·¥å…·ä½¿ç”¨\",\"link\":\"/notes/tools/\"}]},{\"text\":\"ğŸ“š å­¦ä¹ è®°å½•\",\"link\":\"/learning/\",\"collapsed\":false,\"items\":[{\"text\":\"è¯»ä¹¦ç¬”è®°\",\"link\":\"/learning/books/\"},{\"text\":\"è¯¾ç¨‹å­¦ä¹ \",\"link\":\"/learning/courses/\"}]},{\"text\":\"ğŸ¤– AIå·¥å…·\",\"link\":\"/ai/\"},{\"text\":\"ğŸ’¡ é¡¹ç›®å®è·µ\",\"link\":\"/projects/\"},{\"text\":\"ğŸ‘¤ å…³äºæˆ‘\",\"link\":\"/about/\",\"collapsed\":false,\"items\":[{\"text\":\"ä¸ªäººç®€ä»‹\",\"link\":\"/about/\"},{\"text\":\"ä¸ªäººç«™ç‚¹\",\"link\":\"/about/sites\"}]}],\"/nav/\":[]},\"outline\":{\"level\":\"deep\",\"label\":\"ç›®å½•\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/fromsko\"}],\"footer\":{\"message\":\"è®°å½•å­¦ä¹ ã€å®è·µä¸æ€è€ƒ\",\"copyright\":\"Copyright Â© 2024-present fromsko\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°äº\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"returnToTopLabel\":\"å›åˆ°é¡¶éƒ¨\",\"sidebarMenuLabel\":\"èœå•\",\"darkModeSwitchLabel\":\"ä¸»é¢˜\",\"lightModeSwitchTitle\":\"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼\",\"darkModeSwitchTitle\":\"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼\",\"visitor\":{\"badgeId\":\"maomao1996.vitepress-nav-template\"},\"comment\":{\"repo\":\"maomao1996/vitepress-nav-template\",\"repoId\":\"R_kgDOJC09Jg\",\"category\":\"Announcements\",\"categoryId\":\"DIC_kwDOJC09Js4Cekn0\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>
# 08-安转脚本

# 08-安转脚本

## 安装 Go

```shell
#!/bin/bash

# 定义变量
GO_VERSION="1.24.3"
GO_FILE="go${GO_VERSION}.linux-arm64.tar.gz"
DOWNLOAD_URL="https://golang.org/dl/${GO_FILE}"
INSTALL_DIR="/usr/local"

# 检查是否具有 root 权限
if [[ $EUID -ne 0 ]]; then
   echo "此脚本需要以 root 用户运行，请使用 sudo 执行。"
   exit 1
fi

# 更新系统包
echo "正在更新系统包..."
apt update -y && apt upgrade -y

# 安装必要工具
echo "正在安装必要的依赖..."
apt install -y curl wget tar

# 下载 Go 官方版本
echo "正在从官网下载 Go ${GO_VERSION}..."
wget -q --show-progress "${DOWNLOAD_URL}"

# 解压文件到 /usr/local
echo "正在解压 Go 文件到 ${INSTALL_DIR}..."
tar -C ${INSTALL_DIR} -xzf ${GO_FILE}

# 设置环境变量
echo "正在配置 Go 环境变量..."
echo 'export PATH=$PATH:/usr/local/go/bin' >> /etc/profile
source /etc/profile

# 清理临时文件
echo "清理临时文件..."
rm -f ${GO_FILE}

# 验证安装
echo "验证 Go 是否安装成功..."
go version

echo "Go ${GO_VERSION} 已成功安装！"
```

---

## 安装 harness

```xml
docker run -d \
  -p 3000:3000 \
  -p 22:22 \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v /tmp/harness:/data \
  --name harness \
  --restart always \
  harness/harness
```

‍
